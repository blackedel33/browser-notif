/**
*  BrowserNotif.JS
*  (c) 2016 Ipan Ardian
*
*  Lets a web page send notifications that are displayed outside the page at the system level.
*  This lets web apps send information to a user even if the application is idle, in the background, switched tabs or moved to a different app.
*  For details, see the web site: https://github.com/ipanardian/browser-notif
*  The MIT License
*/
"use strict";function _classCallCheck(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}var _extends=Object.assign||function(i){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])}return i},_createClass=function(){function i(i,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(i,o.key,o)}}return function(t,n,o){return n&&i(t.prototype,n),o&&i(t,o),t}}(),BrowserNotif=function(){function i(t){_classCallCheck(this,i),this.options={},this.notifOptions={},this.timeout=0,t&&_extends(this.options,t),this._setOptions(this.options),t.timeout&&(this.timeout=t.timeout),i.isSupported()||console.warn("This browser does not support system notifications")}return _createClass(i,[{key:"_setOptions",value:function(i){for(var t in i)["timeout"].indexOf(t)==-1&&(this.notifOptions[t]=i[t])}},{key:"requestPermission",value:function(i){var t=this;return Notification.requestPermission(function(n){"function"==typeof i&&i.call(t,n)}),this}},{key:"notify",value:function(t,n,o){var e=this;return i.isSupported()?(this.title=t,this.notifOptions.body=n,"granted"===Notification.permission?this._notify(o):"denied"!==Notification.permission?this.requestPermission(function(i){"granted"===i&&e._notify(o)}):console.warn("User denied the notification permission"),this):this}},{key:"_notify",value:function(i){this.notification=new Notification(this.title,this.notifOptions),this._closeNotification(),"function"==typeof i&&i.call(this,this.notification)}},{key:"_closeNotification",value:function(){this.timeout>0&&this.notification instanceof Notification&&setTimeout(this.notification.close.bind(this.notification),1e3*this.timeout)}},{key:"click",value:function(i){var t=this;return"function"==typeof i&&this.notification instanceof Notification&&(this.notification.onclick=function(){i.call(t)}),this}},{key:"close",value:function(){this.notification instanceof Notification&&this.notification.close()}},{key:"error",value:function(i){var t=this;return"function"==typeof i&&this.notification instanceof Notification&&(this.notification.onerror=function(){i.call(t)}),this}}],[{key:"isSupported",value:function(){return"Notification"in window}}]),i}();
//# sourceMappingURL=BrowserNotif.min.js.map
